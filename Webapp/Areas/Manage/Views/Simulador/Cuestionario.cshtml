@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{
    Layout = "_LayoutClient";
}

<style>
	div.error, span.error {
		color: #ed3c0d;
	}

	.menu-email {
		border-top: 3px solid #47b2e4;
		border-bottom: 3px solid #47b2e4;
		background: #fff;
		width: 100%;
		box-shadow: 0 0 24px 0 rgba(0, 0, 0, 0.1);
	}
</style>

<div id="app">


	<div v-if="cuest">
		<section class="breadcrumbs">
			<div class="container">
				<h4 class="text-center">Cuestionario</h4>
			</div>
		</section>

		<div class="container mb-5 mt-3">
			<cuestionario :datos="cuest" @@resp-cuestionario="cuestionarioOK"></cuestionario>
		</div>

	</div>

</div>


<template id="tplCuestionario">
	<div>

		<div class="text-center">
			<p>Por favor conteste las siguientes preguntas</p>
		</div>

		<form id="formCuest">
			<div class="card menu-email">
				<ul class="list-group list-group-flush">
					<li class="list-group-item" v-for="p in datos.preguntas">
						<h5 class="">{{ p.texto }}</h5>

						<div class="mt-3 small">

							<label v-for="o in datos.opciones" style="min-width: 100px" class="form-check form-check-inline">
								<input class="form-check-input" type="radio" @@click="p.error=null"
									   :name="p.nombreRadio" :value="o.value" v-model="p.respuesta">
								{{ o.text }}
							</label>

							@*<div class="form-check form-check-inline" v-for="o in datos.opciones">
									<input class="form-check-input" type="radio" :name="p.nombreRadio" :value="o.value" v-model="p.respuesta">
									<label class="form-check-label" :for="p.nombreRadio" v-text="o.text"></label>
								</div>*@
						</div>

						<div class="badge bg-danger" v-show="p.error">
							* Requerido
						</div>

					</li>
				</ul>
				<div class="card-body text-center">
					<div>
						<button type="submit" class="btn btn-primary">Continuar</button>
					</div>

					<div class="badge bg-danger" v-show="error">Por favor verifique el formulario</div>

				</div>
			</div>
		</form>
	</div>
</template>


@section Scripts {

	@await Html.PartialAsync("_Validation")

	<script src="~/js/evaluacion.js" asp-append-version="true"></script>
	<script>

		$('#footer .footer-top').hide();

		Vue.createApp({
			data() {
				return {
					model: @Html.Raw(ViewBag.modelo),
					baseUrl: '@ViewBag.self',
					urlImagen: '@Url.Content("~/ejercicios")'
				}
			},
			extends: AppEvaluacion,
		})
		.component('cuestionario', Cuestionario)
		.use(globalDirectives)
		.mount('#app');

	</script>
}